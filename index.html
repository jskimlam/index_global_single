<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEA Region SM Companies Map - Clustered</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
        }
        
        #header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        #header h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        #stats {
            display: flex;
            gap: 30px;
            font-size: 14px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        #stats .stat {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        #stats .stat .number {
            font-size: 24px;
            font-weight: bold;
        }
        
        #map {
            width: 100%;
            height: calc(100vh - 200px);
            border: none;
        }
        
        #legend {
            background: white;
            padding: 15px 20px;
            margin: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        #legend h3 {
            margin-bottom: 12px;
            font-size: 16px;
            color: #333;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid white;
            box-shadow: 0 0 0 1px rgba(0,0,0,0.2);
        }
        
        .legend-count {
            margin-left: auto;
            font-weight: bold;
            color: #667eea;
        }
        
        /* ë§ˆì»¤ ìŠ¤íƒ€ì¼ - ì›ë˜ì˜ 2ë¶„ì˜ 1 í¬ê¸° (18px) */
        .custom-marker {
            background: transparent;
            border: none;
        }
        
        .marker-pin {
            width: 18px;
            height: 18px;
            border-radius: 50% 50% 50% 0;
            position: relative;
            transform: rotate(-45deg);
            left: 50%;
            top: 50%;
            margin: -11px 0 0 -9px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.4);
            transition: all 0.2s ease;
        }
        
        .marker-pin:hover {
            transform: rotate(-45deg) scale(1.3);
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .marker-pin::after {
            content: '';
            width: 8px;
            height: 8px;
            margin: 5px 0 0 5px;
            background: white;
            position: absolute;
            border-radius: 50%;
        }
        
        /* ì‚¼ê°í˜• ë§ˆì»¤ - ì •ê¸°ë³´ìˆ˜ ì˜ˆì • */
        .marker-triangle {
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 18px solid;
            position: relative;
            left: 50%;
            top: 50%;
            margin: -11px 0 0 -10px;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.4));
            transition: all 0.2s ease;
        }
        
        .marker-triangle:hover {
            transform: scale(1.3);
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.5));
            z-index: 1000;
        }
        
        .marker-triangle::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 8px solid white;
            left: -5px;
            bottom: 2px;
        }
        
        /* í´ëŸ¬ìŠ¤í„° ì‚¼ê°í˜• */
        .marker-triangle-cluster {
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 18px solid;
            position: relative;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.4));
            transition: all 0.2s ease;
        }
        
        .marker-triangle-cluster:hover {
            transform: scale(1.3);
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.5));
        }
        
        .triangle-cluster-number {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 9px;
            left: -4px;
            bottom: 3px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        /* í´ëŸ¬ìŠ¤í„° ë§ˆì»¤ - ìˆ«ì í‘œì‹œ */
        .marker-cluster {
            width: 18px;
            height: 18px;
            border-radius: 50% 50% 50% 0;
            position: relative;
            transform: rotate(-45deg);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.4);
            transition: all 0.2s ease;
        }
        
        .marker-cluster:hover {
            transform: rotate(-45deg) scale(1.3);
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        
        .cluster-number {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 9px;
            transform: rotate(45deg);
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        /* ì •ê¸°ë³´ìˆ˜ í„ìŠ¤ íš¨ê³¼ */
        .marker-pin.has-maintenance::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50% 50% 50% 0;
            background: inherit;
            opacity: 0.6;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.6;
            }
            50% {
                transform: scale(1.8);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }
        
        /* íŒì—… ìŠ¤íƒ€ì¼ */
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.25);
            padding: 0;
            max-width: 350px;
        }
        
        .leaflet-popup-content {
            margin: 0;
            font-size: 14px;
            line-height: 1.6;
            min-width: 280px;
            max-width: 350px;
        }
        
        .popup-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 12px 12px 0 0;
        }
        
        .popup-title {
            font-size: 17px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .popup-location {
            font-size: 13px;
            opacity: 0.9;
        }
        
        .popup-body {
            padding: 15px;
            background: white;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .current-maintenance-alert {
            background: #2C3E50;
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 12px;
            text-align: center;
            font-weight: bold;
            font-size: 13px;
        }
        
        .company-item {
            background: #f8f9fa;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .company-item:hover {
            background: #e9ecef;
            transform: translateX(3px);
        }
        
        .company-item.current-maintenance {
            border-left-color: #2C3E50;
            background: #f0f0f0;
        }
        
        .company-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 6px;
            font-size: 14px;
        }
        
        .company-details {
            font-size: 12px;
            color: #666;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .detail-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: white;
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .capacity-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
        }
        
        .maintenance-badge {
            display: inline-block;
            background: #ff6b6b;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
        }
        
        .no-maintenance {
            background: #51cf66;
        }
        
        .popup-info {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .popup-icon {
            font-size: 20px;
            margin-right: 10px;
            min-width: 25px;
        }
        

        /* ìœ„ì¹˜ ë¼ë²¨ */
        .location-label {
            background: rgba(102, 126, 234, 0.95);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            white-space: nowrap;
            pointer-events: none;
        }
        
        .location-label::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            margin-left: -5px;
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid rgba(102, 126, 234, 0.95);
        }


        /* Capacityë³„ ë§ˆì»¤ í¬ê¸° ë²”ë¡€ ì¶”ê°€ */
        .size-legend {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }
        
        .size-legend-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .size-item {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            font-size: 12px;
        }
        
        .size-circle {
            border-radius: 50%;
            background: #667eea;
            margin-right: 10px;
        }

        .leaflet-popup-tip {
            box-shadow: 0 3px 14px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>ğŸŒ Global SM Production Companies</h1>
        <div id="stats">
            <div class="stat">
                <span class="number" id="total-count">0</span>
                <span>Total Companies</span>
            </div>
            <div class="stat">
                <span class="number">4</span>
                <span>Countries</span>
            </div>
            <div class="stat">
                <span class="number" id="maintenance-count">0</span>
                <span>With Maintenance</span>
            </div>
            <div class="stat" style="background: rgba(44,62,80,0.1); padding: 5px 10px; border-radius: 8px;">
                <span class="number" id="current-maintenance-count" style="color: #2C3E50;">0</span>
                <span style="color: #2C3E50;">âš« Current (Feb)</span>
            </div>
            <div class="stat" style="background: rgba(52,152,219,0.1); padding: 5px 10px; border-radius: 8px;">
                <span class="number" id="future-maintenance-count" style="color: #3498DB;">0</span>
                <span style="color: #3498DB;">ğŸ”µ Scheduled</span>
            </div>
        </div>
    </div>
    
    <div id="map"></div>
    
    <div id="legend">
        <h3>ğŸ“ Countries</h3>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #FF6B6B;"></div>
            <span>China (Mainland)</span>
            <span class="legend-count" id="china-count">0</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #4ECDC4;"></div>
            <span>Korea, South</span>
            <span class="legend-count" id="korea-count">0</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #FFE66D;"></div>
            <span>Japan</span>
            <span class="legend-count" id="japan-count">0</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #A8E6CF;"></div>
            <span>Taiwan</span>
            <span class="legend-count" id="taiwan-count">0</span>
        </div>
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e0e0e0;">
            <div class="legend-item" style="margin-bottom: 12px; background: rgba(44,62,80,0.05); padding: 8px; border-radius: 6px;">
                <div class="legend-color" style="background-color: #2C3E50; width: 28px; height: 28px;"></div>
                <span><strong>âš« í˜„ì¬ ì •ê¸°ë³´ìˆ˜ ì¤‘ (2ì›”)</strong></span>
            </div>
            <div class="legend-item" style="margin-bottom: 12px; background: rgba(52,152,219,0.05); padding: 8px; border-radius: 6px;">
                <div style="width: 0; height: 0; border-left: 14px solid transparent; border-right: 14px solid transparent; border-bottom: 24px solid #3498DB; margin-right: 10px;"></div>
                <span><strong>ğŸ”µ ì •ê¸°ë³´ìˆ˜ ì˜ˆì • (3ì›” ì´í›„)</strong></span>
            </div>
            <p style="font-size: 12px; color: #666; margin-bottom: 5px;">ğŸ’¡ ìˆ«ìê°€ ìˆëŠ” ë§ˆì»¤ëŠ” ì—¬ëŸ¬ ì—…ì²´ê°€ ìˆìŠµë‹ˆë‹¤</p>
            <p style="font-size: 12px; color: #666;">âš¡ í„ìŠ¤ íš¨ê³¼ê°€ ìˆëŠ” ë§ˆì»¤ëŠ” ì •ê¸°ë³´ìˆ˜ ì¼ì •ì´ ìˆìŠµë‹ˆë‹¤</p>
        
        <div class="size-legend">
            <div class="size-legend-title">ğŸ“ Capacityë³„ í¬ê¸°</div>
            <div class="size-item">
                <div class="size-circle" style="width: 10px; height: 10px;"></div>
                <span>0-100 kt</span>
            </div>
            <div class="size-item">
                <div class="size-circle" style="width: 14px; height: 14px;"></div>
                <span>100-300 kt</span>
            </div>
            <div class="size-item">
                <div class="size-circle" style="width: 18px; height: 18px;"></div>
                <span>300-500 kt</span>
            </div>
            <div class="size-item">
                <div class="size-circle" style="width: 24px; height: 24px;"></div>
                <span>500-700 kt</span>
            </div>
            <div class="size-item">
                <div class="size-circle" style="width: 30px; height: 30px;"></div>
                <span>700+ kt (ì´ˆëŒ€í˜•)</span>
            </div>
        </div>
        </div>
    </div>

    <script>
        // í´ëŸ¬ìŠ¤í„° ë°ì´í„°
        const clusters = [{"lat": 32.9234, "lng": 115.8456, "location": "Fuyang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Anhui Haoyuan Chemical Group Co., Ltd.", "location": "Fuyang", "capacity": 260, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 32.9234, "lng": 115.8456, "has_future_maintenance": false, "precise_address": "No.1 Yuanfeng Road, Yingdong Economic Development Zone", "marker_size": 14}]}, {"lat": 32.6789, "lng": 117.0234, "location": "Huainan", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Anhui Jiaxi New Material Technology Co., Ltd.", "location": "Huainan", "capacity": 350, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 32.6789, "lng": 117.0234, "has_future_maintenance": false, "precise_address": "Coal Chemical Avenue, Panji Modern Coal Chemical Park", "marker_size": 18}]}, {"lat": 40.9234, "lng": 121.9567, "location": "Panjin", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": true, "companies": [{"country": "CHINA (MAINLAND)", "company": "Bora LyondellBasell Petrochemical Co Ltd", "location": "Panjin", "capacity": 350, "maintenance": "12ì›”", "is_current_maintenance": false, "lat": 40.9234, "lng": 121.9567, "has_future_maintenance": true, "precise_address": "Binhai Road, Liaodong Bay New District", "marker_size": 18}]}, {"lat": 41.0234, "lng": 122.1234, "location": "Panjin", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Panjin Ethylene Co., Ltd.", "location": "Panjin", "capacity": 195, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 41.0234, "lng": 122.1234, "has_future_maintenance": false, "precise_address": "Xiuyuan Road, Shuangtaizi District Petrochemical Park", "marker_size": 14}]}, {"lat": 45.58, "lng": 84.87, "location": "Karamay", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "China Petroleum Engineering Co Ltd", "location": "Karamay", "capacity": 40, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 45.58, "lng": 84.87, "has_future_maintenance": false, "marker_size": 10}, {"country": "CHINA (MAINLAND)", "company": "PetroChina Dushanzi Petrochemical Co", "location": "Karamay", "capacity": 360, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 45.58, "lng": 84.87, "has_future_maintenance": false, "marker_size": 18}]}, {"lat": 22.7234, "lng": 114.6234, "location": "Huizhou", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "CNOOC and Shell Petrochemicals Co Ltd (CSPC)", "location": "Huizhou", "capacity": 637, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 22.7234, "lng": 114.6234, "has_future_maintenance": false, "precise_address": "North 1st Road, Daya Bay Petrochemical Industrial Park", "marker_size": 24}, {"country": "CHINA (MAINLAND)", "company": "CNOOC and Shell Petrochemicals Co Ltd (CSPC)", "location": "Huizhou", "capacity": 650, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 22.7234, "lng": 114.6234, "has_future_maintenance": false, "precise_address": "North 1st Road, Daya Bay Petrochemical Industrial Park", "marker_size": 24}]}, {"lat": 19.1, "lng": 108.65, "location": "Dongfang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "CNOOC Dongfang Petrochemical Co., Ltd.", "location": "Dongfang", "capacity": 120, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 19.1, "lng": 108.65, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 29.8234, "lng": 121.7456, "location": "Ningbo", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Cnooc Ningbo Daxie Petrochemical Co Ltd", "location": "Ningbo", "capacity": 280, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 29.8234, "lng": 121.7456, "has_future_maintenance": false, "precise_address": "Binhai West Road, Daxie Development Zone", "marker_size": 14}]}, {"lat": 29.8923, "lng": 121.7234, "location": "Ningbo", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Ningbo Huatai Shengfu Polymeric Materials Co., Ltd.", "location": "Ningbo", "capacity": 400, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 29.8923, "lng": 121.7234, "has_future_maintenance": false, "precise_address": "Hai Tong Road, Xiepu Town, Ningbo Petrochemical ETD", "marker_size": 18}]}, {"lat": 29.8945, "lng": 121.7267, "location": "Ningbo", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Ningbo Keyuan Refining Co., Ltd.", "location": "Ningbo", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 29.8945, "lng": 121.7267, "has_future_maintenance": false, "precise_address": "Binhai Road, Xiepu Town, Ningbo Petrochemical ETD", "marker_size": 10}]}, {"lat": 29.9823, "lng": 121.7834, "location": "Ningbo", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Ningbo ZRCC Lyondell Chemical Co Ltd", "location": "Ningbo", "capacity": 620, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 29.9823, "lng": 121.7834, "has_future_maintenance": false, "precise_address": "Houhai Road, Zhenhai District Petrochemical Base", "marker_size": 24}, {"country": "CHINA (MAINLAND)", "company": "Ningbo ZRCC LyondellBasell New Material Co. Ltd.", "location": "Ningbo", "capacity": 600, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 29.9823, "lng": 121.7834, "has_future_maintenance": false, "precise_address": "Houhai Road, Zhenhai District Petrochemical Base", "marker_size": 24}]}, {"lat": 22.9234, "lng": 116.2345, "location": "Jieyang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "CNPC/PDVSA Guangdong Petrochemical Co. Ltd.", "location": "Jieyang", "capacity": 800, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 22.9234, "lng": 116.2345, "has_future_maintenance": false, "precise_address": "Danhanshen Petrochemical Base, Huilai County", "marker_size": 30}]}, {"lat": 46.6234, "lng": 125.0234, "location": "Daqing", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Daqing Petrochemical Company", "location": "Daqing", "capacity": 100, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 46.6234, "lng": 125.0234, "has_future_maintenance": false, "precise_address": "Wolifun, Longfeng District, Sinopec Complex Area", "marker_size": 14}, {"country": "CHINA (MAINLAND)", "company": "Daqing Petrochemical Company", "location": "Daqing", "capacity": 125, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 46.6234, "lng": 125.0234, "has_future_maintenance": false, "precise_address": "Wolifun, Longfeng District, Sinopec Complex Area", "marker_size": 14}]}, {"lat": 23.94895, "lng": 117.57005000000001, "location": "Zhangzhou", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": true, "companies": [{"country": "CHINA (MAINLAND)", "company": "Fujian Gulei Petrochemical Co Ltd", "location": "Zhangzhou", "capacity": 600, "maintenance": "3ì›”, 4ì›”", "is_current_maintenance": false, "lat": 23.9456, "lng": 117.5678, "has_future_maintenance": true, "precise_address": "Gulei Avenue, Gulei Port Economic Development Zone", "marker_size": 24}, {"country": "CHINA (MAINLAND)", "company": "Fujian Haiquan Chemical Co., Ltd", "location": "Zhangzhou", "capacity": 226, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 23.9523, "lng": 117.5723, "has_future_maintenance": false, "precise_address": "Lanhai Road, Gulei Port Economic Development Zone", "marker_size": 14}]}, {"lat": 21.66, "lng": 110.92, "location": "Maoming", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": true, "companies": [{"country": "CHINA (MAINLAND)", "company": "Guangdong Xinhuayue Petrochemical Group Co., Ltd.", "location": "Maoming", "capacity": 30, "maintenance": "11ì›”, 12ì›”", "is_current_maintenance": false, "lat": 21.66, "lng": 110.92, "has_future_maintenance": true, "marker_size": 10}]}, {"lat": 35.29, "lng": 115.09, "location": "Dongming", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Guoen Chemical (Dongming) Co., Ltd.", "location": "Dongming", "capacity": 150, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 35.29, "lng": 115.09, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 39.2345, "lng": 121.9123, "location": "Dalian", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Hengli Petrochemical (Dalian) Co., Ltd.", "location": "Dalian", "capacity": 720, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 39.2345, "lng": 121.9123, "has_future_maintenance": false, "precise_address": "Hengli Road, Changxing Island Economic Zone", "marker_size": 30}]}, {"lat": 36.8234, "lng": 119.2345, "location": "Weifang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Hongrun Petrochemical (Weifang) Co Ltd", "location": "Weifang", "capacity": 120, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.8234, "lng": 119.2345, "has_future_maintenance": false, "precise_address": "No. 001, Binhai Road, Weifang Binhai ETDZ", "marker_size": 14}]}, {"lat": 36.06, "lng": 103.83, "location": "Lanzhou", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Lanzhou Huifeng Petrochemical Co., Ltd.", "location": "Lanzhou", "capacity": 25, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.06, "lng": 103.83, "has_future_maintenance": false, "marker_size": 10}, {"country": "CHINA (MAINLAND)", "company": "PetroChina Lanzhou Petrochemical Co", "location": "Lanzhou", "capacity": 60, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.06, "lng": 103.83, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 37.5234, "lng": 118.6789, "location": "Dongying", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Lihuayi Lijin Refining and Chemical Co Ltd", "location": "Dongying", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 37.5234, "lng": 118.6789, "has_future_maintenance": false, "precise_address": "Lijin Binhai Economic Zone, Phase 2 Industrial Sector", "marker_size": 10}, {"country": "CHINA (MAINLAND)", "company": "Lihuayi Lijin Refining and Chemical Co Ltd", "location": "Dongying", "capacity": 720, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 37.5234, "lng": 118.6789, "has_future_maintenance": false, "precise_address": "Lijin Binhai Economic Zone, Phase 2 Industrial Sector", "marker_size": 30}]}, {"lat": 37.43, "lng": 118.67, "location": "Dongying", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Shandong Huaxing Petrochemical Group Co Ltd", "location": "Dongying", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 37.43, "lng": 118.67, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 37.4823, "lng": 118.7923, "location": "Dongying", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Zhenhua Petrochemical Co., Ltd.", "location": "Dongying", "capacity": 503, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 37.4823, "lng": 118.7923, "has_future_maintenance": false, "precise_address": "Dongying Port Economic Zone, Coastal Highway Sector", "marker_size": 24}]}, {"lat": 31.8567, "lng": 120.0234, "location": "Changzhou", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "New Solar Technology Group Co., Ltd.", "location": "Changzhou", "capacity": 250, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 31.8567, "lng": 120.0234, "has_future_maintenance": false, "precise_address": "Binjiang 1st Road, Changzhou Binjiang Economic Development Zone", "marker_size": 14}, {"country": "CHINA (MAINLAND)", "company": "New Solar Technology Group Co., Ltd.", "location": "Changzhou", "capacity": 300, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 31.8567, "lng": 120.0234, "has_future_maintenance": false, "precise_address": "Binjiang 1st Road, Changzhou Binjiang Economic Development Zone", "marker_size": 18}]}, {"lat": 41.88, "lng": 123.92, "location": "Fushun", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "PetroChina Fushun Petrochemical Co", "location": "Fushun", "capacity": 60, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 41.88, "lng": 123.92, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 21.95, "lng": 108.62, "location": "Qinzhou", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "PetroChina Guangxi Petrochemical Co Ltd", "location": "Qinzhou", "capacity": 35, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 21.95, "lng": 108.62, "has_future_maintenance": false, "marker_size": 10}, {"country": "CHINA (MAINLAND)", "company": "PetroChina Guangxi Petrochemical Co Ltd", "location": "Qinzhou", "capacity": 302, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 21.95, "lng": 108.62, "has_future_maintenance": false, "marker_size": 18}]}, {"lat": 38.7, "lng": 116.09, "location": "Renqiu", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "PetroChina Huabei Petrochemical Co", "location": "Renqiu", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 38.7, "lng": 116.09, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 43.9123, "lng": 126.5234, "location": "Jilin City", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "PetroChina Jilin Petrochemical Co", "location": "Jilin City", "capacity": 600, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 43.9123, "lng": 126.5234, "has_future_maintenance": false, "precise_address": "No.98 Zhengzhou Road, Longtan District", "marker_size": 24}, {"country": "CHINA (MAINLAND)", "company": "PetroChina Jilin Petrochemical Co", "location": "Jilin City", "capacity": 320, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 43.9123, "lng": 126.5234, "has_future_maintenance": false, "precise_address": "No.98 Zhengzhou Road, Longtan District", "marker_size": 18}]}, {"lat": 40.71, "lng": 120.84, "location": "Huludao", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "PetroChina Jinxi Petrochemical Co", "location": "Huludao", "capacity": 60, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 40.71, "lng": 120.84, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 41.12, "lng": 121.14, "location": "Jinzhou", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "PetroChina Jinzhou Petrochemical Co", "location": "Jinzhou", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 41.12, "lng": 121.14, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 35.9234, "lng": 119.8567, "location": "Qingdao", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Qingdao Haiwan Chemical Co., Ltd.", "location": "Qingdao", "capacity": 500, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 35.9234, "lng": 119.8567, "has_future_maintenance": false, "precise_address": "Port Road, Dongjiakou Port Economic Zone", "marker_size": 24}]}, {"lat": 36.07, "lng": 120.38, "location": "Qingdao", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Qingdao Refining and Chemical Co Ltd", "location": "Qingdao", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.07, "lng": 120.38, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 34.6723, "lng": 119.5234, "location": "Lianyungang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Satellite Chemical Co., Ltd.", "location": "Lianyungang", "capacity": 600, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 34.6723, "lng": 119.5234, "has_future_maintenance": false, "precise_address": "Xuwei Avenue (North), Xuwei New District", "marker_size": 24}]}, {"lat": 34.6634, "lng": 119.5123, "location": "Lianyungang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Shenghong Petrochemical Co Ltd", "location": "Lianyungang", "capacity": 450, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 34.6634, "lng": 119.5123, "has_future_maintenance": false, "precise_address": "Xuwei Avenue (South), Xuwei New District", "marker_size": 18}]}, {"lat": 36.59, "lng": 109.49, "location": "Yan'an", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Shaanxi Yanchang Petroleum (Group) Co., Ltd., Refinery & Chemical Company", "location": "Yan'an", "capacity": 120, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.59, "lng": 109.49, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 37.4234, "lng": 120.3567, "location": "Yantai", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Shandong Yulong Petrochemical Co Ltd", "location": "Yantai", "capacity": 500, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 37.4234, "lng": 120.3567, "has_future_maintenance": false, "precise_address": "Yulong Island Reclamation Area, Longkou", "marker_size": 24}]}, {"lat": 37.5123, "lng": 121.4234, "location": "Yantai", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Wanhua Chemical Group Co.,Ltd", "location": "Yantai", "capacity": 650, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 37.5123, "lng": 121.4234, "has_future_maintenance": false, "precise_address": "No. 59, Chongqing Road, Yantai ETDZ", "marker_size": 24}, {"country": "CHINA (MAINLAND)", "company": "Wanhua Chemical Group Co.,Ltd", "location": "Yantai", "capacity": 12, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 37.5123, "lng": 121.4234, "has_future_maintenance": false, "precise_address": "No. 59, Chongqing Road, Yantai ETDZ", "marker_size": 10}]}, {"lat": 30.7456, "lng": 121.2678, "location": "Jinshan", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Shanghai SECCO Petrochemical Co Ltd", "location": "Jinshan", "capacity": 650, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 30.7456, "lng": 121.2678, "has_future_maintenance": false, "precise_address": "No. 557, Muhua Road, Shanghai Chemical Industry Park", "marker_size": 24}]}, {"lat": 38.3, "lng": 116.84, "location": "Cangzhou", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Shengteng Technology Co., Ltd.", "location": "Cangzhou", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 38.3, "lng": 116.84, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 24.9234, "lng": 118.7123, "location": "Quanzhou", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinochem Quanzhou Petrochemical Co Ltd", "location": "Quanzhou", "capacity": 450, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 24.9234, "lng": 118.7123, "has_future_maintenance": false, "precise_address": "Quangang Petrochemical Base, Sinopec/Sinochem Sector", "marker_size": 18}]}, {"lat": 30.5534, "lng": 117.0923, "location": "Anqing", "country": "CHINA (MAINLAND)", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Anqing Company", "location": "Anqing", "capacity": 100, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 30.5534, "lng": 117.0923, "has_future_maintenance": false, "precise_address": "Wandong Road, Daguan District", "marker_size": 14}, {"country": "CHINA (MAINLAND)", "company": "Sinopec Anqing Company", "location": "Anqing", "capacity": 400, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 30.5534, "lng": 117.0923, "has_future_maintenance": false, "precise_address": "Wandong Road, Daguan District", "marker_size": 18}]}, {"lat": 29.37, "lng": 113.09, "location": "Yueyang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Group Assets Management Corporation Baling Petrochemical Branch", "location": "Yueyang", "capacity": 120, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 29.37, "lng": 113.09, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 23.13, "lng": 113.26, "location": "Guangzhou", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": true, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Guangzhou Co", "location": "Guangzhou", "capacity": 80, "maintenance": "10ì›”, 11ì›”, 12ì›”", "is_current_maintenance": false, "lat": 23.13, "lng": 113.26, "has_future_maintenance": true, "marker_size": 10}]}, {"lat": 19.7234, "lng": 109.1823, "location": "Yangpu", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Hainan Refining and Chemical Co Ltd", "location": "Yangpu", "capacity": 500, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 19.7234, "lng": 109.1823, "has_future_maintenance": false, "marker_size": 24}]}, {"lat": 19.73, "lng": 109.18, "location": "Yangpu", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "SINOPEC Hainan Shihua Sunchem Chemicals Co., Ltd.", "location": "Yangpu", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 19.73, "lng": 109.18, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 31.03, "lng": 112.2, "location": "Jingmen", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Jingmen Co", "location": "Jingmen", "capacity": 80, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 31.03, "lng": 112.2, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 32.1234, "lng": 118.8567, "location": "Nanjing", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Jinling Co", "location": "Nanjing", "capacity": 60, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 32.1234, "lng": 118.8567, "has_future_maintenance": false, "precise_address": "No. 388, Ganjiaxiang, Qixia District", "marker_size": 10}]}, {"lat": 32.06, "lng": 118.8, "location": "Nanjing", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Various_China Facilities", "location": "Nanjing", "capacity": 120, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 32.06, "lng": 118.8, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 34.62, "lng": 112.45, "location": "Luoyang", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec Luoyang Co", "location": "Luoyang", "capacity": 120, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 34.62, "lng": 112.45, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 39.0234, "lng": 117.7823, "location": "Tianjin", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Sinopec SABIC Tianjin Petrochemical Co Ltd", "location": "Tianjin", "capacity": 35, "maintenance": "1ì›”, 2ì›”, 12ì›”", "is_current_maintenance": true, "lat": 39.0234, "lng": 117.7823, "has_future_maintenance": false, "precise_address": "Nangang 3rd St, Nangang Industrial Zone", "marker_size": 10}]}, {"lat": 32.1923, "lng": 119.9234, "location": "Taixing", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "SP Chemicals (Taixing) Co., Ltd.", "location": "Taixing", "capacity": 320, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 32.1923, "lng": 119.9234, "has_future_maintenance": false, "precise_address": "Binjiang North Road, Taixing Economic Development Zone", "marker_size": 18}]}, {"lat": 39.2234, "lng": 118.4567, "location": "Tangshan", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Tangshan Risun Chemical Co Ltd", "location": "Tangshan", "capacity": 300, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 39.2234, "lng": 118.4567, "has_future_maintenance": false, "precise_address": "Caofeidian 5th Road, Caofeidian Industrial Zone", "marker_size": 18}]}, {"lat": 38.9567, "lng": 117.7234, "location": "Binhai New Area", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Tianjin Bohua Chemical Development Co Ltd", "location": "Binhai New Area", "capacity": 450, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 38.9567, "lng": 117.7234, "has_future_maintenance": false, "precise_address": "Nangang 1st St, Nangang Industrial Zone", "marker_size": 18}]}, {"lat": 39.0123, "lng": 117.7945, "location": "Binhai New Area", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Tianjin Dagu Chemical Co Ltd", "location": "Binhai New Area", "capacity": 500, "maintenance": "2ì›”, 3ì›”, 4ì›”", "is_current_maintenance": true, "lat": 39.0123, "lng": 117.7945, "has_future_maintenance": false, "precise_address": "No. 111, Bohai Road, Lingang Economic Area", "marker_size": 24}]}, {"lat": 30.1234, "lng": 122.4567, "location": "Zhoushan", "country": "CHINA (MAINLAND)", "cluster_size": 3, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Zhejiang Petroleum and Chemical Co Ltd", "location": "Zhoushan", "capacity": 1200, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 30.1234, "lng": 122.4567, "has_future_maintenance": false, "precise_address": "Yushan Island Base, Daishan County", "marker_size": 30}, {"country": "CHINA (MAINLAND)", "company": "Zhejiang Petroleum and Chemical Co Ltd", "location": "Zhoushan", "capacity": 600, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 30.1234, "lng": 122.4567, "has_future_maintenance": false, "precise_address": "Yushan Island Base, Daishan County", "marker_size": 24}, {"country": "CHINA (MAINLAND)", "company": "Zhejiang Petroleum and Chemical Co Ltd", "location": "Zhoushan", "capacity": 600, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 30.1234, "lng": 122.4567, "has_future_maintenance": false, "precise_address": "Yushan Island Base, Daishan County", "marker_size": 24}]}, {"lat": 36.7923, "lng": 118.1234, "location": "Zibo", "country": "CHINA (MAINLAND)", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "CHINA (MAINLAND)", "company": "Zibo Juncheng Chemical Co., Ltd.", "location": "Zibo", "capacity": 500, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.7923, "lng": 118.1234, "has_future_maintenance": false, "marker_size": 24}]}, {"lat": 34.52, "lng": 133.73, "location": "Mizushima", "country": "JAPAN", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "JAPAN", "company": "Asahi Kasei Corp", "location": "Mizushima", "capacity": 390, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 34.52, "lng": 133.73, "has_future_maintenance": false, "marker_size": 18}]}, {"lat": 35.5, "lng": 140.12, "location": "Ichihara", "country": "JAPAN", "cluster_size": 3, "has_future_maintenance": true, "companies": [{"country": "JAPAN", "company": "Denka Co Ltd", "location": "Ichihara", "capacity": 270, "maintenance": "6ì›”, 7ì›”, 8ì›”", "is_current_maintenance": false, "lat": 35.5, "lng": 140.12, "has_future_maintenance": true, "marker_size": 14}, {"country": "JAPAN", "company": "Idemitsu Kosan Co., Ltd", "location": "Ichihara", "capacity": 210, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 35.5, "lng": 140.12, "has_future_maintenance": false, "marker_size": 14}, {"country": "JAPAN", "company": "Toyo Styrene Co., Ltd.", "location": "Ichihara", "capacity": 2, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 35.5, "lng": 140.12, "has_future_maintenance": false, "marker_size": 10}]}, {"lat": 34.06, "lng": 131.81, "location": "Shunan", "country": "JAPAN", "cluster_size": 2, "has_future_maintenance": true, "companies": [{"country": "JAPAN", "company": "Idemitsu Kosan Co., Ltd", "location": "Shunan", "capacity": 210, "maintenance": "8ì›”, 9ì›”, 10ì›”", "is_current_maintenance": false, "lat": 34.06, "lng": 131.81, "has_future_maintenance": true, "marker_size": 14}, {"country": "JAPAN", "company": "Idemitsu Kosan Co., Ltd", "location": "Shunan", "capacity": 120, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 34.06, "lng": 131.81, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 33.24, "lng": 131.61, "location": "Oita", "country": "JAPAN", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "JAPAN", "company": "NS Styrene Monomer Co., Ltd.", "location": "Oita", "capacity": 190, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 33.24, "lng": 131.61, "has_future_maintenance": false, "marker_size": 14}, {"country": "JAPAN", "company": "NS Styrene Monomer Co., Ltd.", "location": "Oita", "capacity": 232, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 33.24, "lng": 131.61, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 36.8934, "lng": 126.3845, "location": "Seosan", "country": "KOREA, SOUTH", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "KOREA, SOUTH", "company": "Hanwha TotalEnergies Petrochemical Co Ltd", "location": "Seosan", "capacity": 400, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.8934, "lng": 126.3845, "has_future_maintenance": false, "marker_size": 18}, {"country": "KOREA, SOUTH", "company": "Hanwha TotalEnergies Petrochemical Co Ltd", "location": "Seosan", "capacity": 650, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.8934, "lng": 126.3845, "has_future_maintenance": false, "marker_size": 24}]}, {"lat": 36.8756, "lng": 126.3923, "location": "Seosan", "country": "KOREA, SOUTH", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "KOREA, SOUTH", "company": "Lotte Chemical Corporation", "location": "Seosan", "capacity": 580, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 36.8756, "lng": 126.3923, "has_future_maintenance": false, "marker_size": 24}]}, {"lat": 35.54, "lng": 129.31, "location": "Ulsan", "country": "KOREA, SOUTH", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "KOREA, SOUTH", "company": "SK Picglobal Co., Ltd.", "location": "Ulsan", "capacity": 400, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 35.54, "lng": 129.31, "has_future_maintenance": false, "marker_size": 18}]}, {"lat": 34.76, "lng": 127.66, "location": "Yeosu", "country": "KOREA, SOUTH", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"country": "KOREA, SOUTH", "company": "YEOCHUN NCC Co Ltd", "location": "Yeosu", "capacity": 346, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 34.76, "lng": 127.66, "has_future_maintenance": false, "marker_size": 18}]}, {"lat": 23.782300000000003, "lng": 120.2134, "location": "Mailiao", "country": "TAIWAN", "cluster_size": 3, "has_future_maintenance": true, "companies": [{"country": "TAIWAN", "company": "Formosa Chemical & Fiber Corp", "location": "Mailiao", "capacity": 250, "maintenance": "1ì›”, 6ì›”, 11ì›”", "is_current_maintenance": false, "lat": 23.7823, "lng": 120.2134, "has_future_maintenance": true, "marker_size": 14}, {"country": "TAIWAN", "company": "Formosa Chemical & Fiber Corp", "location": "Mailiao", "capacity": 350, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 23.7823, "lng": 120.2134, "has_future_maintenance": false, "marker_size": 18}, {"country": "TAIWAN", "company": "Formosa Chemical & Fiber Corp", "location": "Mailiao", "capacity": 720, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 23.7823, "lng": 120.2134, "has_future_maintenance": false, "marker_size": 30}]}, {"lat": 22.77, "lng": 120.36, "location": "Ta-She District", "country": "TAIWAN", "cluster_size": 2, "has_future_maintenance": false, "companies": [{"country": "TAIWAN", "company": "Grand Pacific Petrochemical Corporation", "location": "Ta-She District", "capacity": 240, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 22.77, "lng": 120.36, "has_future_maintenance": false, "marker_size": 14}, {"country": "TAIWAN", "company": "Grand Pacific Petrochemical Corporation", "location": "Ta-She District", "capacity": 130, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 22.77, "lng": 120.36, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 22.49, "lng": 120.4, "location": "Lin Yuan District", "country": "TAIWAN", "cluster_size": 2, "has_future_maintenance": true, "companies": [{"country": "TAIWAN", "company": "Taiwan Styrene Monomer Corporation", "location": "Lin Yuan District", "capacity": 180, "maintenance": "10ì›”", "is_current_maintenance": false, "lat": 22.49, "lng": 120.4, "has_future_maintenance": true, "marker_size": 14}, {"country": "TAIWAN", "company": "Taiwan Styrene Monomer Corporation", "location": "Lin Yuan District", "capacity": 160, "maintenance": "ì—†ìŒ", "is_current_maintenance": false, "lat": 22.49, "lng": 120.4, "has_future_maintenance": false, "marker_size": 14}]}, {"lat": 35.5234, "lng": 139.6923, "location": "Kawasaki", "country": "JAPAN", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Asahi Kasei Corp", "location": "Kawasaki", "country": "JAPAN", "capacity": 280, "lat": 35.5234, "lng": 139.6923, "address": "Ukushimacho, Kawasaki-ku, Kanagawa", "maintenance": "ì—†ìŒ", "marker_size": 14, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 34.4856, "lng": 133.7123, "location": "Mizushima", "country": "JAPAN", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Asahi Kasei Corp", "location": "Mizushima", "country": "JAPAN", "capacity": 450, "lat": 34.4856, "lng": 133.7123, "address": "Mizushima Kaigandori, Kurashiki, Okayama", "maintenance": "ì—†ìŒ", "marker_size": 18, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": -6.0234, "lng": 106.1234, "location": "Serang", "country": "INDONESIA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "PT Styrindo Mono", "location": "Serang", "country": "INDONESIA", "capacity": 150, "lat": -6.0234, "lng": 106.1234, "address": "Bojonegara, Serang, Banten", "maintenance": "ì—†ìŒ", "marker_size": 14, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 1.2634, "lng": 103.7123, "location": "Jurong Island", "country": "SINGAPORE", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Aster / Shell", "location": "Jurong Island", "country": "SINGAPORE", "capacity": 800, "lat": 1.2634, "lng": 103.7123, "address": "Sakra/Seraya Sector, Jurong Island", "maintenance": "ì—†ìŒ", "marker_size": 30, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 12.6523, "lng": 101.1834, "location": "Rayong", "country": "THAILAND", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "IRPC / Siam Styrene", "location": "Rayong", "country": "THAILAND", "capacity": 500, "lat": 12.6523, "lng": 101.1834, "address": "Map Ta Phut Industrial Estate", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 30.0523, "lng": -90.8456, "location": "St. James", "country": "USA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Americas Styrenics", "location": "St. James", "country": "USA", "capacity": 900, "lat": 30.0523, "lng": -90.8456, "address": "Hwy 18, St. James, Louisiana", "maintenance": "ì—†ìŒ", "marker_size": 30, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 30.1823, "lng": -91.0234, "location": "Carville", "country": "USA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Cos-Mar (Lyondell/Sabic)", "location": "Carville", "country": "USA", "capacity": 680, "lat": 30.1823, "lng": -91.0234, "address": "Hwy 75, Carville, Louisiana", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 29.6534, "lng": -95.1523, "location": "Pasadena", "country": "USA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "INEOS Styrolution", "location": "Pasadena", "country": "USA", "capacity": 650, "lat": 29.6534, "lng": -95.1523, "address": "Bayport Industrial District", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 29.3834, "lng": -94.9123, "location": "Texas City", "country": "USA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "INEOS Styrolution", "location": "Texas City", "country": "USA", "capacity": 590, "lat": 29.3834, "lng": -94.9123, "address": "5th Ave South, Texas City", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 29.7923, "lng": -95.1234, "location": "Channelview", "country": "USA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "PO JV (LBI/Covestro)", "location": "Channelview", "country": "USA", "capacity": 520, "lat": 29.7923, "lng": -95.1234, "address": "Sheldon Rd, Channelview", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 53.7123, "lng": -113.2456, "location": "Ft. Saskatchewan", "country": "CANADA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Shell Chemicals", "location": "Ft. Saskatchewan", "country": "CANADA", "capacity": 300, "lat": 53.7123, "lng": -113.2456, "address": "Scotford Complex", "maintenance": "ì—†ìŒ", "marker_size": 18, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": -23.8523, "lng": -46.4234, "location": "Triunfo", "country": "BRAZIL", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "CBE / Videolar-Innova", "location": "Triunfo", "country": "BRAZIL", "capacity": 340, "lat": -23.8523, "lng": -46.4234, "address": "Polo Petroquimico", "maintenance": "ì—†ìŒ", "marker_size": 18, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 51.2923, "lng": 4.3234, "location": "Antwerp", "country": "BELGIUM", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "INEOS Styrolution", "location": "Antwerp", "country": "BELGIUM", "capacity": 600, "lat": 51.2923, "lng": 4.3234, "address": "Scheldelaan, Port of Antwerp", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 49.5134, "lng": 0.2234, "location": "Gonfreville", "country": "FRANCE", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "TotalEnergies", "location": "Gonfreville", "country": "FRANCE", "capacity": 500, "lat": 49.5134, "lng": 0.2234, "address": "Plate-forme de Normandie", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 49.4823, "lng": 8.4234, "location": "Ludwigshafen", "country": "GERMANY", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "BASF SE", "location": "Ludwigshafen", "country": "GERMANY", "capacity": 900, "lat": 49.4823, "lng": 8.4234, "address": "Carl-Bosch-StraÃŸe", "maintenance": "ì—†ìŒ", "marker_size": 30, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 45.1623, "lng": 10.7834, "location": "Mantova", "country": "ITALY", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Eni / Versalis", "location": "Mantova", "country": "ITALY", "capacity": 200, "lat": 45.1623, "lng": 10.7834, "address": "Via G. Taliercio", "maintenance": "ì—†ìŒ", "marker_size": 14, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 51.6823, "lng": 4.6234, "location": "Moerdijk", "country": "NETHERLANDS", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Shell / Ellba", "location": "Moerdijk", "country": "NETHERLANDS", "capacity": 450, "lat": 51.6823, "lng": 4.6234, "address": "Ceresweg, Port of Moerdijk", "maintenance": "ì—†ìŒ", "marker_size": 18, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 41.1523, "lng": 1.2434, "location": "La Pobla", "country": "SPAIN", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Repsol Quimica", "location": "La Pobla", "country": "SPAIN", "capacity": 500, "lat": 41.1523, "lng": 1.2434, "address": "Tarragona Petrochemical Complex", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 50.0334, "lng": 19.2134, "location": "Oswiecim", "country": "POLAND", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Synthos", "location": "Oswiecim", "country": "POLAND", "capacity": 110, "lat": 50.0334, "lng": 19.2134, "address": "ul. ChemikÃ³w", "maintenance": "ì—†ìŒ", "marker_size": 14, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 50.2423, "lng": 14.3134, "location": "Kralupy", "country": "CZECH REPUBLIC", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Synthos", "location": "Kralupy", "country": "CZECH REPUBLIC", "capacity": 135, "lat": 50.2423, "lng": 14.3134, "address": "O. Wichterleho", "maintenance": "ì—†ìŒ", "marker_size": 14, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 27.0134, "lng": 49.5823, "location": "Al Jubail", "country": "SAUDI ARABIA", "cluster_size": 1, "has_future_maintenance": true, "companies": [{"company": "Petrokemya / JCPA", "location": "Al Jubail", "country": "SAUDI ARABIA", "capacity": 1120, "lat": 27.0134, "lng": 49.5823, "address": "Jubail Industrial City", "maintenance": "3ì›”", "marker_size": 30, "is_current_maintenance": false, "has_future_maintenance": true}]}, {"lat": 29.0923, "lng": 48.1234, "location": "Shuaiba", "country": "KUWAIT", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Kuwait Styrene", "location": "Shuaiba", "country": "KUWAIT", "capacity": 525, "lat": 29.0923, "lng": 48.1234, "address": "Shuaiba Industrial Area", "maintenance": "2ì›”", "marker_size": 24, "is_current_maintenance": true, "has_future_maintenance": false}]}, {"lat": 27.1823, "lng": 52.6234, "location": "Asaluyeh", "country": "IRAN", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Pars Petrochemical", "location": "Asaluyeh", "country": "IRAN", "capacity": 600, "lat": 27.1823, "lng": 52.6234, "address": "Pars Special Economic Energy Zone", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 38.0823, "lng": 46.2923, "location": "Tabriz", "country": "IRAN", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Tabriz Petrochemical", "location": "Tabriz", "country": "IRAN", "capacity": 300, "lat": 38.0823, "lng": 46.2923, "address": "Tabriz Petrochemical Complex", "maintenance": "ì—†ìŒ", "marker_size": 18, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 55.6323, "lng": 51.8234, "location": "Nizhnekamsk", "country": "RUSSIA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Nizhnekamskneftekhim", "location": "Nizhnekamsk", "country": "RUSSIA", "capacity": 650, "lat": 55.6323, "lng": 51.8234, "address": "Promzona, Nizhnekamsk, Tatarstan", "maintenance": "ì—†ìŒ", "marker_size": 24, "is_current_maintenance": false, "has_future_maintenance": false}]}, {"lat": 58.0134, "lng": 56.2834, "location": "Perm", "country": "RUSSIA", "cluster_size": 1, "has_future_maintenance": false, "companies": [{"company": "Sibur-Khimprom", "location": "Perm", "country": "RUSSIA", "capacity": 160, "lat": 58.0134, "lng": 56.2834, "address": "Promyshlennaya St, Perm", "maintenance": "ì—†ìŒ", "marker_size": 14, "is_current_maintenance": false, "has_future_maintenance": false}]}];
        
        // êµ­ê°€ë³„ ìƒ‰ìƒ
        const countryColors = {
            'CHINA (MAINLAND)': '#FF6B6B',
            'KOREA, SOUTH': '#4ECDC4',
            'JAPAN': '#FFE66D',
            'TAIWAN': '#A8E6CF'
        };
        
        // ê¸€ë¡œë²Œ ì§€ì—­ ìƒ‰ìƒ ë§¤í•‘
        function getRegionColor(country) {
            const regionMap = {
                // Asia - Red
                'CHINA (MAINLAND)': '#FF6B6B',
                'KOREA, SOUTH': '#FF6B6B',
                'JAPAN': '#FF6B6B',
                'TAIWAN': '#FF6B6B',
                'SINGAPORE': '#FF6B6B',
                'INDONESIA': '#FF6B6B',
                'THAILAND': '#FF6B6B',
                // Americas - Mint
                'USA': '#95E1D3',
                'CANADA': '#95E1D3',
                'BRAZIL': '#95E1D3',
                // Europe - Teal
                'BELGIUM': '#4ECDC4',
                'FRANCE': '#4ECDC4',
                'GERMANY': '#4ECDC4',
                'ITALY': '#4ECDC4',
                'NETHERLANDS': '#4ECDC4',
                'SPAIN': '#4ECDC4',
                'POLAND': '#4ECDC4',
                'CZECH REPUBLIC': '#4ECDC4',
                // Middle East - Orange
                'SAUDI ARABIA': '#FFB84D',
                'KUWAIT': '#FFB84D',
                'IRAN': '#FFB84D',
                // Russia - Purple
                'RUSSIA': '#C7CEEA'
            };
            return regionMap[country] || '#95a5a6';
        }
        
        // ì§€ë„ ì´ˆê¸°í™”
        const map = L.map('map').setView([20.0, 20.0], 2);
        
        // íƒ€ì¼ ë ˆì´ì–´ (ê¹”ë”í•œ ìŠ¤íƒ€ì¼, ë¼ë²¨ ì—†ìŒ)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png', {
            attribution: 'Â© OpenStreetMap contributors, Â© CARTO',
            maxZoom: 18,
            minZoom: 4,
            subdomains: 'abcd'
        }).addTo(map);
        
        // í†µê³„
        let totalCompanies = 0;
        let maintenanceCount = 0;
        let currentMaintenanceCount = 0;
        let futureMaintenanceCount = 0;
        const countryCounts = {
            'CHINA (MAINLAND)': 0,
            'KOREA, SOUTH': 0,
            'JAPAN': 0,
            'TAIWAN': 0
        };
        
        // ë§ˆì»¤ ì¶”ê°€
        clusters.forEach(cluster => {
            const isMultiple = cluster.cluster_size > 1;
            const companies = cluster.companies;
            
            // í†µê³„ ê³„ì‚°
            companies.forEach(c => {
                totalCompanies++;
                if (countryCounts.hasOwnProperty(c.country)) {
                    countryCounts[c.country]++;
                }
                if (c.maintenance !== 'ì—†ìŒ') maintenanceCount++;
                if (c.is_current_maintenance) currentMaintenanceCount++;
                if (c.has_future_maintenance) futureMaintenanceCount++;
            });
            
            // ìƒ‰ìƒ ê²°ì •
            const hasCurrentMaintenance = companies.some(c => c.is_current_maintenance);
            const hasFutureMaintenance = cluster.has_future_maintenance;
            
            let color, shape;
            if (hasCurrentMaintenance) {
                // í˜„ì¬ ì •ê¸°ë³´ìˆ˜ ì¤‘ - ê²€ì€ìƒ‰
                color = '#2C3E50';
                shape = 'pin';
            } else if (hasFutureMaintenance) {
                // ì •ê¸°ë³´ìˆ˜ ì˜ˆì • - íŒŒë€ìƒ‰ ì‚¼ê°í˜•
                color = '#3498DB';
                shape = 'triangle';
            } else {
                // ì¼ë°˜ - êµ­ê°€ë³„ ìƒ‰ìƒ
                color = getRegionColor(cluster.country);
                shape = 'pin';
            }
            
            const hasMaintenance = companies.some(c => c.maintenance !== 'ì—†ìŒ');
            
            // ì•„ì´ì½˜ ìƒì„±
            let iconHtml;
            if (isMultiple) {
                // í´ëŸ¬ìŠ¤í„° ë§ˆì»¤
                if (shape === 'triangle') {
                    iconHtml = `<div class="marker-triangle-cluster" style="border-bottom-color: ${color};">
                        <span class="triangle-cluster-number">${cluster.cluster_size}</span>
                    </div>`;
                } else {
                    iconHtml = `<div class="marker-cluster" style="background-color: ${color};">
                        <span class="cluster-number">${cluster.cluster_size}</span>
                    </div>`;
                }
            } else {
                // ë‹¨ì¼ ë§ˆì»¤
                if (shape === 'triangle') {
                    iconHtml = `<div class="marker-triangle" style="border-bottom-color: ${color};"></div>`;
                } else {
                    iconHtml = `<div class="marker-pin ${hasMaintenance ? 'has-maintenance' : ''}" style="background-color: ${color};"></div>`;
                }
            }
            
            // Capacity ê¸°ë°˜ ë§ˆì»¤ í¬ê¸° ê³„ì‚°
            let markerSize = 18; // ê¸°ë³¸ í¬ê¸°
            if (cluster.companies && cluster.companies.length > 0) {
                const avgCapacity = cluster.companies.reduce((sum, c) => {
                    const cap = c.capacity === 'N/A' ? 0 : parseInt(c.capacity);
                    return sum + cap;
                }, 0) / cluster.companies.length;
                
                if (avgCapacity < 100) markerSize = 10;
                else if (avgCapacity < 300) markerSize = 14;
                else if (avgCapacity < 500) markerSize = 18;
                else if (avgCapacity < 700) markerSize = 24;
                else markerSize = 30;
            }
            
            const pinHeight = markerSize * 1.3;
            
            const customIcon = L.divIcon({
                className: 'custom-marker',
                html: iconHtml,
                iconSize: [markerSize, pinHeight],
                iconAnchor: [markerSize/2, pinHeight],
                popupAnchor: [0, -pinHeight]
            });
            
            // ë§ˆì»¤ ìƒì„±
            const marker = L.marker([cluster.lat, cluster.lng], {
                icon: customIcon,
                title: cluster.location
            }).addTo(map);
            
            // íŒì—… ë‚´ìš©
            let popupContent;
            
            if (isMultiple) {
                // ì—¬ëŸ¬ ì—…ì²´ ë¦¬ìŠ¤íŠ¸
                const companiesList = companies.map(c => {
                    let badge = '';
                    if (c.is_current_maintenance) {
                        badge = 'âš« ';
                    } else if (c.has_future_maintenance) {
                        badge = 'ğŸ”µ ';
                    }
                    
                    return `
                    <div class="company-item ${c.is_current_maintenance ? 'current-maintenance' : ''}">
                        <div class="company-name">${badge}${c.company}</div>
                        <div class="company-details">
                            <span class="detail-badge">âš¡ <strong>${c.capacity === 'N/A' ? 'N/A' : c.capacity + ' MT'}</strong></span>
                            <span class="detail-badge">ğŸ”§ ${c.maintenance !== 'ì—†ìŒ' ? c.maintenance : 'ì—†ìŒ'}</span>
                        </div>
                    </div>
                `}).join('');
                
                popupContent = `
                    <div class="popup-header">
                        <div class="popup-title">${cluster.location} (${cluster.cluster_size}ê°œ ì—…ì²´)</div>
                        <div class="popup-location">ğŸ“ ${cluster.country}</div>
                    </div>
                    <div class="popup-body">
                        ${companiesList}
                    </div>
                `;
            } else {
                // ë‹¨ì¼ ì—…ì²´
                const c = companies[0];
                const currentMaintenanceBadge = c.is_current_maintenance ? 
                    '<div class="current-maintenance-alert">âš« í˜„ì¬ ì •ê¸°ë³´ìˆ˜ ì¤‘ (2ì›”)</div>' : '';
                
                popupContent = `
                    <div class="popup-header">
                        <div class="popup-title">${c.company}</div>
                        <div class="popup-location">ğŸ“ ${c.location}, ${c.country}</div>
                    </div>
                    <div class="popup-body">
                        ${currentMaintenanceBadge}
                        <div class="popup-info">
                            <span class="popup-icon">âš¡</span>
                            <span style="font-weight: 600; color: #555;">Capacity:</span>
                            <span class="capacity-badge">${c.capacity === 'N/A' ? 'N/A' : c.capacity + ' MT'}</span>
                        </div>
                        <div class="popup-info">
                            <span class="popup-icon">ğŸ”§</span>
                            <span style="font-weight: 600; color: #555;">ì •ê¸°ë³´ìˆ˜:</span>
                            <span class="maintenance-badge ${c.maintenance !== 'ì—†ìŒ' ? '' : 'no-maintenance'}">
                                ${c.maintenance !== 'ì—†ìŒ' ? c.maintenance : 'ì—†ìŒ'}
                            </span>
                        </div>
                    </div>
                `;
            }
            

        
        // ìœ„ì¹˜ ë¼ë²¨ í‘œì‹œ í•¨ìˆ˜
        let currentLabel = null;
        
        function showLocationLabel(cluster) {
            // ê¸°ì¡´ ë¼ë²¨ ì œê±°
            if (currentLabel) {
                map.removeLayer(currentLabel);
            }
            
            // ìƒˆ ë¼ë²¨ ìƒì„±
            const labelContent = `<div class="location-label">${cluster.location}</div>`;
            currentLabel = L.marker([cluster.lat, cluster.lng], {
                icon: L.divIcon({
                    className: 'location-label-marker',
                    html: labelContent,
                    iconSize: [100, 40],
                    iconAnchor: [50, 50]
                }),
                zIndexOffset: 1000
            }).addTo(map);
        }

            // íŒì—… ì—´ë¦´ ë•Œ ìœ„ì¹˜ ë¼ë²¨ í‘œì‹œ
            marker.on('popupopen', function() {
                showLocationLabel(cluster);
            });
            
            // íŒì—… ë‹«í ë•Œ ë¼ë²¨ ì œê±°
            marker.on('popupclose', function() {
                if (currentLabel) {
                    map.removeLayer(currentLabel);
                    currentLabel = null;
                }
            });
            
            marker.bindPopup(popupContent, {
                maxWidth: 350,
                className: 'custom-popup'
            });
        });
        
        console.log(`ì´ ${totalCompanies}ê°œ ì—…ì²´, ${clusters.length}ê°œ ë§ˆì»¤`);
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        document.getElementById('total-count').textContent = totalCompanies;
        document.getElementById('maintenance-count').textContent = maintenanceCount;
        document.getElementById('current-maintenance-count').textContent = currentMaintenanceCount;
        document.getElementById('future-maintenance-count').textContent = futureMaintenanceCount;
        document.getElementById('china-count').textContent = countryCounts['CHINA (MAINLAND)'];
        document.getElementById('korea-count').textContent = countryCounts['KOREA, SOUTH'];
        document.getElementById('japan-count').textContent = countryCounts['JAPAN'];
        document.getElementById('taiwan-count').textContent = countryCounts['TAIWAN'];
    </script>
</body>
</html>
